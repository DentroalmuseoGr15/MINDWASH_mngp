<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Effetto Mouse su Canvas</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #232323;
    }
    canvas {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    body {
        font-family: "Futura", sans-serif;
        background-color: #f1f1f1; /* Grigio molto chiaro */
        margin: 0;
        padding: 0;
        cursor: none;
    }

    header {
      top: 0;

      z-index: 1000;
        background-color: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 50px;
    }

    footer {
    position: fixed;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    bottom: 0;
    right: 0;
    margin: 20px;
    padding: 10px;
    background-color: none;
    color: #000000;
    }


    .header-left h1 {
        font-weight: bold;
        margin: 0;
        font-size: 15px;
    }

    .header-right a {
        text-decoration: none;
        color: #000000; /* NERO */
        margin-left: 60px;
          font-size: 12px;
            filter: blur(2px);
            transition: filter 2s; /* effetto di transizione */
    }

    .header-right a:hover {
      filter: blur(0px); /* sfocato al passaggio del mouse */

    }



    /* Versione mobile */
    @media (max-width: 768px) {
        header {
            flex-direction: column;
            align-items: flex-start;
        }

        .header-left h1 {
            margin-bottom: 10px;
        }

        .header-right a {
            margin: 5px 0;
            display: block;
        }
    }

    .lingua-button
    {
     cursor: none;
        display: inline-block;
        color: #000000;
        text-decoration: none;
        margin-bottom: 10px;
          font-size: 10px;
      transition: filter 2s; /* effetto di transizione */
      filter: blur(2px); /* sfocato al passaggio del mouse */
    }

    .lingua-button:hover
    {
      filter: blur(0px); /* sfocato al passaggio del mouse */

    }


    /* Aggiungi questo stile per nascondere la tendina di default */
    .dropdown-content {
        display: none;
    }

    /* Modifica lo stile del pulsante tendina */
    .dropbtn {
        background-color: transparent;
        border: none;
        cursor: pointer;
        color: #000000;
        font-size: 16px;
        font-weight: bold;
        transition: color 0.3s ease;
          filter: blur(2px);
    }

    /* Stile della tendina */
    .dropdown-content a {
        display: block;
        text-decoration: none;
        color: #000000;
        padding: 10px;
        transition: color 0.3s ease;
    }

    /* Quando passi sopra un elemento della tendina */
    .dropdown-content a:hover {
        color: #000000; /* Nero */
    }

    /* Stile per il pulsante tendina aperto */
    .show {
        display: block;
    }

    /* Nascondi il menu mobile nella versione desktop */
    .mobile-menu {
        display: none;
    }

    /* Nascondi il menu desktop nella versione mobile */
    .desktop-menu {
        display: block;
    }

    /* Versione mobile */
    @media (max-width: 768px) {
        .desktop-menu {
            display: none;
        }

        .mobile-menu {
            display: flex;
            align-items: center;
        }

        .dropbtn {
            font-size: 24px; /* Dimensione dell'icona aumentata per la versione mobile */
        }

        .header-left h1 {
            font-size: 1.5em; /* Rimpicciolire il testo nell'header per la versione mobile */
        }
    }
    .wrapper {
                text-align: center; /* Centra il contenuto */
                max-width: 100%; /* Larghezza massima */
                padding: 0 20px; /* Margine laterale */
                box-sizing: border-box; /* Include il padding nel calcolo della larghezza */
            }
            .grid-container {
                position: absolute;
                top: 80px;
                bottom: 80px;
                width: 100%;
                background: #ffffff;
                z-index: 999;
            }
            /* Cursore personalizzato */

            #custom-cursor {
            width: 8px;
            height: 8px;
            background: black;
            border-radius: 100%;
            position: absolute;
            z-index: 9999;
            pointer-events: none;
            }

            #cursor-shadow {
                width: 8px;
                height: 8px;
                background-color: rgba(0, 0, 0, 0.3);
                border-radius: 100%;
                position: absolute;
                z-index: 9998;
                pointer-events: none;
                transform: translate(-50%, -50%);
                display: none;
            }


              /* Animazione TRACK POINT */
              /* Contenitore del testo e animazione */
   .track-point {
     position: absolute;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     text-align: center;
     z-index: 2;
   }

              #text-container {
                font-size: 40px;
                margin-top: 30px;
                font-weight: bold;
                color: #000000;
                overflow: hidden;
                white-space: nowrap;
                display: inline-block;
                width: 0; /* Inizia invisibile */
                animation: typing 2s steps(12, end) forwards, blink 0.3s step-end infinite;
                transition: opacity 0.5s ease;

              }

              @keyframes typing {
                from { width: 0; }
                to { width: 17ch; }
              }


              .rectangle {
                width: 0;
                height: 40px;
                background: #000000;
                margin: 20px auto;
                margin-top: -50px;
                transform: rotate(0deg);
                animation: fill-rectangle 1s 3.5s forwards, rotate-rectangle 1s 4.5s forwards;
              }

              @keyframes fill-rectangle {
                to { width: 300px; }
              }


              @keyframes rotate-rectangle {
                to { transform: rotate(90deg); }
              }

              .point {
                position: absolute;
                width: 50px;
                height: 50px;
                top: 210px;
                left: 163px;
                background: #000000;
                border-radius: 50%;
                margin: 20px auto;
                opacity: 0;
                animation: show-point 1s 5.5s forwards;
              }

              @keyframes show-point {
                to { opacity: 1; }
              }

              .hide {
                  opacity: 0;
                  visibility: hidden;
                  transition: opacity 0.5s ease;
              }

              .move-left {
            transform: translateX(-100%); /* Effetto spostamento a sinistra */
          }

          .move-right {
            transform: translateX(0); /* Ritorna alla posizione originale */
          }



              .video-container {
                           position: relative;
                           z-index: 1;
                           width: 100%;
                           height: 50vh; /* Altezza relativa alla finestra */
                           overflow: hidden;
                           display: flex;
                           justify-content: center;
                           align-items: center;
                           background: #000; /* Sfondo per il contenitore */
                          margin-top: 50px;
                         }

              video {
                width: 100%;
                height: auto;
              }



  </style>
</head>
<body>
  <!-- Cursor -->
  <div id="custom-cursor"></div>
  <!-- Header -->
  <header>
      <div class="header-left">
          <h1>MELANIE NICOLE GILER PINARGOTE</h1>
      </div>
      <div class="header-right">
          <!-- Versione web -->
          <div class="desktop-menu">
              <a href="diario.html">DIARIO</a>
              <a href="progetti.html">PROGETTI</a>
              <a href="software.html">SOFTWARE</a>
              <a href="curriculum.html">CURRICULUM</a>
          </div>
          <!-- Versione mobile -->
          <div class="mobile-menu">
              <button onclick="toggleDropdown()" class="dropbtn"><i class="fas fa-bars"></i></button> <!-- Icona del menu -->
              <div id="myDropdown" class="dropdown-content">
                  <a href="diario.html">DIARIO</a>
                  <a href="progetti.html">PROGETTI</a>
                  <a href="software.html">SOFTWARE</a>
                  <a href="curriculum.html">CURRICULUM</a>
              </div>
          </div>
      </div>
  </header>

  <!-- Animazione TRACK POINT -->
    <div class="track-point">
        <div id="text-container">TRACK POINT</div> <!-- Contenitore per il testo animato -->
        <div class="rectangle"></div>
        <div class="point"></div>
    </div>

    <!-- Canvas per l'effetto del mouse -->
    <canvas></canvas>

 <div class="break"></div> <!-- Interruzione di pagina -->





  <footer>
      <div>
          <a class="lingua-button" href="eng.html">ENG</a>
          <a class="lingua-button">|</a>
          <a class="lingua-button" href="esp.html">ESP</a>
      </div>
  </footer>


  <script>

  // Cursore personalizzato
  document.addEventListener("DOMContentLoaded", function () {
      const customCursor = document.getElementById("custom-cursor");

      document.addEventListener("mousemove", function (e) {
          customCursor.style.left = e.pageX + "px";
          customCursor.style.top = e.pageY + "px";
      });
  });


    var c = document.createElement('canvas');
    var ctx = c.getContext("2d");
    document.body.appendChild(c);
    window.onresize = resize;

    /*-canvas setup*/

    var dots = [];
    var colW = 70;
    var lineH = 54;
    var nbCols;
    var nbLines;
    var nbDots;
    var t = 0;
    var mouse = { x: window.innerWidth * 0.5, y: window.innerHeight * 0.5 };
    var action = { x: window.innerWidth * 0.5, y: window.innerHeight * 0.5 };
    var zoneRadius;
    var zoneStep = 100;
    var isMouseActive = false; // Flag per il controllo del mouse

    function start() {
        draw();
    }

    var Dot = function (x, y) {
        this.x = x;
        this.y = y;
        this.ax = x;
        this.ay = y;
    };

    function createDots() {
        var w = c.width;
        var h = c.height;
        nbCols = ~~(w / colW) + 2;
        nbLines = ~~(h / lineH) + 2;
        nbDots = nbCols * nbLines;
        var decalX = -17;
        var decalY = -10;
        dots = [];

        for (var i = 0; i < nbLines; i++) {
            for (var j = 0; j < nbCols; j++) {
                dots.push(new Dot(decalX + j * colW, decalY + i * lineH));
            }
        }
    }

    function drawDots(anchors, color, radius) {
        var dot;
        for (var i = 0; i < nbDots; i++) {
            dot = dots[i];
            dist = getDistance(dot, action);
            ctx.globalAlpha = Math.max(1 - (dist / (zoneRadius * 1.2)), 0);;
            ctx.beginPath();
            if (anchors) {
                ctx.moveTo(dot.ax, dot.ay);
                ctx.arc(dot.ax, dot.ay, radius, 0, Math.PI * 2, true);
            }
            else {
                ctx.moveTo(dot.x, dot.y);
                ctx.arc(dot.x, dot.y, radius, 0, Math.PI * 2, true);
            }
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();
        }
    }

    function drawLines(color) {
        var dot, nextDot, col, lin, dist;
        for (var i = 0; i < nbDots; i++) {
            line = ~~(i / nbCols);
            col = i % nbCols;

            dot = dots[i];
            dist = getDistance(dot, action);
            ctx.globalAlpha = Math.max(1 - (dist / (zoneRadius * 1.2)), 0.05);
            ctx.beginPath();
            if (line < (nbLines - 1)) {
                nextDot = dots[i + nbCols];
                ctx.moveTo(dot.x, dot.y);
                ctx.lineTo(nextDot.x, nextDot.y);
            }
            if (col < (nbCols - 1)) {
                nextDot = dots[i + 1];
                ctx.moveTo(dot.x, dot.y);
                ctx.lineTo(nextDot.x, nextDot.y);
            }
            ctx.closePath();
            ctx.strokeStyle = color;
            ctx.stroke();
        }
    }

    function drawJoints(color) {
        var dot, nextDot, col, lin, dist;
        for (var i = 0; i < nbDots; i++) {
            dot = dots[i];
            dist = getDistance(dot, action);
            ctx.globalAlpha = Math.max(1 - (dist / (zoneRadius * 1.2)), 0.05);
            ctx.beginPath();

            ctx.moveTo(dot.x, dot.y);
            ctx.lineTo(dot.ax, dot.ay);

            ctx.closePath();
            ctx.strokeStyle = color;
            ctx.stroke();
        }
    }

    function getDistance(dot1, dot2) {
        return Math.sqrt((dot2.x - dot1.x) * (dot2.x - dot1.x) + (dot2.y - dot1.y) * (dot2.y - dot1.y));
    }

    function moveDots() {
        var dot, dist, angle;
        for (var i = 0; i < nbDots; i++) {
            dot = dots[i];
            angle = -Math.atan2(action.x - dot.ax, action.y - dot.ay) - (Math.PI * 0.5);
            dist = getDistance(dot, action);

            if (dist <= zoneRadius) {
                dot.x = dot.ax + zoneStep * (1 - (dist / zoneRadius)) * Math.cos(angle);
                dot.y = dot.ay + zoneStep * (1 - (dist / zoneRadius)) * Math.sin(angle);
            }
            else {
                dot.x = dot.ax;
                dot.y = dot.ay;
            }
        }
    }

    function resize() {
        var box = c.getBoundingClientRect();
        var w = box.width;
        var h = box.height;
        c.width = w;
        c.height = h;
        zoneRadius = Math.min(c.width * 0.2, 250);
        createDots();
    }

    function draw() {
        if (isMouseActive) {
            requestAnimationFrame(draw);
            render();
        }
    }

    function render() {
        t += 0.02;

        ctx.clearRect(0, 0, c.width, c.height);
        action.x += (mouse.x - action.x) * 0.07;
        action.y += (mouse.y - action.y) * 0.07;
        moveDots();
        drawLines("#D76C46");
        drawJoints("#D3D3D3");
        drawDots(true, "#58A6D8", 2);
    }

    // Eventi del mouse
    c.addEventListener('mousemove', (e) => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
        if (!isMouseActive) {
            isMouseActive = true;
            draw(); // Avvia animazione
        }
    });

    c.addEventListener('mouseleave', () => {
        isMouseActive = false; // Ferma l'animazione
    });

    resize();

    // Aggiungere un evento di fine animazione al rettangolo
    document.querySelector('.rectangle').addEventListener('animationend', function() {
        document.getElementById('text-container').classList.add('hide'); // Nascondi il testo
    });

    // Personalizzato per seguire il mouse
    const cursor = document.getElementById('custom-cursor');

    document.addEventListener('mousemove', (e) => {
        cursor.style.left = `${e.pageX}px`;
        cursor.style.top = `${e.pageY}px`;
    });





    // Flag per controllare se lo scrolling è attivo
    let animationFinished = false;

    // Aggiungi un evento per la fine dell'animazione del rettangolo
    document.querySelector('.rectangle').addEventListener('animationend', function () {
        animationFinished = true; // L'animazione è terminata
    });

    // Effetto scroll inverso
    let lastScrollY = window.scrollY;

    window.addEventListener("scroll", () => {
      const currentScrollY = window.scrollY;
      if (currentScrollY > lastScrollY) {
        c.classList.add("move-left");
        c.classList.remove("move-right");
      } else {
        c.classList.add("move-right");
        c.classList.remove("move-left");
      }
      lastScrollY = currentScrollY;
    });

    function resizeCanvas() {
        c.width = window.innerWidth;
        c.height = window.innerHeight;
        zoneRadius = Math.min(c.width * 0.2, 250);
        createDots(); // Ricalcola i punti dopo il resize
    }


    window.addEventListener("resize", resizeCanvas);






    document.addEventListener("DOMContentLoaded", () => {
      const video = document.getElementById('scroll-video');
      const videoContainer = document.querySelector('.video-container');

      // Assicurati che il video si carichi correttamente
      video.addEventListener('loadedmetadata', () => {
        const videoDuration = video.duration;
        const videoHeight = videoContainer.offsetHeight;
        const pageHeight = document.body.scrollHeight - window.innerHeight;

        window.addEventListener('scroll', () => {
          // Calcola la percentuale di scroll sulla pagina
          const scrollTop = window.scrollY;
          const scrollFraction = scrollTop / pageHeight;

          // Mappa lo scroll al progresso del video
          const videoTime = videoDuration * scrollFraction;
          video.currentTime = videoTime;
        });
      });
    });

  </script>
</body>
</html>
